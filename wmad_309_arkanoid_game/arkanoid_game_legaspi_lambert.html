<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arkanoid Game - Lambert Legaspi</title>
    <style>
        #arkanoid {
            border: 2px dashed black;
        }
    </style>
</head>
<body>
    <canvas id="arkanoid" height="600" width="800"></canvas>
    <script>
        const canvas = document.getElementById("arkanoid");
        const ctx = canvas.getContext('2d');

        class Ball {
            #ctx;
            #x;
            #y;
            #radius;
            #color;

            #dx = 5;
            #dy = -5;

            constructor(ctx, x = 0, y = 0) {
                this.#ctx = ctx;
                this.#x = x;
                this.#y = y;
                this.#radius = 10;
                this.#color = "#" + Math.floor(Math.random() * 16777215).toString(16);
            }

            get x() {
                return this.#x;
            }

            set x(x) {
                this.#x = x;
            }

            get y() {
                return this.#y;
            }

            set y(y) {
                this.#y = y;
            }

            get radius() {
                return this.#radius;
            }

            get dx() {
                return this.#dx;
            }

            set dx(dx) {
                this.#dx = dx;
            }

            get dy() {
                return this.#dy;
            }

            set dy(dy) {
                this.#dy = dy;
            }

            speedUp(speed) {
                this.#dx *= speed;
                this.#dy *= speed;
            }

            bounce(dx, dy) {
                this.#dx = dx;
                this.#dy = dy;
                this.#color = "#" + Math.floor(Math.random() * 16777215).toString(16);
            }

            move() {
                this.#x += this.#dx;
                this.#y += this.#dy;
            }

            draw() {
                this.#ctx.beginPath();
                this.#ctx.arc(
                    this.#x,
                    this.#y,
                    this.#radius, 0,
                    Math.PI * 2
                );
                this.#ctx.strokeStyle = "red";
                this.#ctx.fillStyle = this.#color;
                this.#ctx.stroke();
                this.#ctx.fill();
            }
        }

        class Paddle {
            #ctx;
            #x;
            #y;
            #height;
            #width;
            #speed;

            constructor(ctx, x, y){
                this.#ctx = ctx;
                this.#height = 15;
                this.#width = 200;
                this.#x = x - this.#width / 2;
                this.#y = y - this.#height;
                this.#speed = 5;
            }

            get x(){
                return this.#x;
            }

            set x(x){
                this.#x = x;
            }

            get y(){
                return this.#y;
            }

            set y(y){
                this.#y = y;
            }

            get width(){
                return this.#width;
            }

        }

        const weapon = new Ball(ctx, 400, 500);
        const player = new Paddle(ctx, canvas.width/2, canvas.height/2);

        // Enroll event listener that the left or right arrow key been pressed
        document.onkeydown = function (e) {
            if (event.key === "ArrowRight"){
                player.moveRight();
            }

            if (event.key === "ArrowLeft"){
                player.moveLeft();
            }
        };

        // Re-draw the canvas based on the current state of the created instances/object
        
        setInterval(function () {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            weapon.move();

            if(
                (weapon.x - weapon.radius) <= 0 ||
                (weapon.x + weapon.radius) >= canvas.width
            ) {
                weapon.bounce(-weapon.dx, weapon.dy);
            
            }

            if(
                (weapon.y - weapon.radius) <= 0 ||
                (weapon.y + weapon.radius) >= canvas.height
            ) {    
                weapon.bounce(weapon.dx, -weapon.dy);
            }
            weapon.draw();
        }, 10);



    </script>
</body>
</html>
